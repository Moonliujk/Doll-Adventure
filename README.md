
前端纳米学位街机游戏克隆项目
===============================

学生应该用这个[评审标准](https://review.udacity.com/#!/rubrics/499/view)来自我检查自己提交的代码。 确认自己写的函数要是**面向对象的** -  要么是类函数（就像函数 Player 和 Enemy）要么是类的原型链上的函数比如 Enemy.prototype.checkCollisions ， 在类函数里面或者类的原型链函数里面适当的使用关键词 'this' 来引用调用该函数的对象实例。最后保证你的**readme.md**文件要写明关于如何运行和如何玩你的街机游戏的指引。

关于如何开始这个项目的更详细的指导，可以查阅这份[指南](https://gdgdocs.org/document/d/1v01aScPjSWCCWQLIpFqvg3-vXLH2e8_SZQKC8jNO0Dc/pub?embedded=true)。
## HOW TO PLAY：
 开始时，玩家拥有5点生命值，当生命值为零时，游戏结束
>* 通过“上下左右”按键来控制任务的移动
>* 当到达河对岸时，玩家胜利，进入下一关；共有10关，难度依次上升
>* 移动过程中不能触碰到敌人，否则减少一点生命值，并返回初始点
>* 游戏中，可以通过收集宝石赚取积分，其中蓝色宝石30分，绿色宝石60分，黄色宝石100分，获得的难度依次上升
>* 游戏中会出现神秘钥匙，在地图上随机分布，玩家获得钥匙后，会在地图上随机出现宝藏，玩家获得宝藏后，可在游戏结束后获得新的任务皮肤；获得皮肤后，玩家可以在开始界面选择新的皮肤继续游戏
>* 地图上会出现障碍物，玩家无法跨越障碍物走动
>* 地图上会出现传送门，玩家可以通过它出现在地图上的任一点

## 游戏体验设计思路
>* 共有10关，游戏难度随level的增加而增加
>* 难度的增加主要体现在敌人数量及运动速度的增加上
>* 随着level的增加，障碍物的数目也会增加，设置障碍物最高数目为5
>* 游戏中共出现五种物品：星星道具（获得后可解锁新的人物皮肤），钥匙道具（获得后可在地图上的随机位置出现星星道具），宝石道具（可以赚取积分），补血袋道具（可以获得1点生命值，但总生命值不会大于5点）以及不稳定传送门道具（触发传动到地图上任意一点的效果，可多次触发；警告，有可能会触碰到敌人）
>* 游戏中设置排名机制，通过sessionStorage实现数据存储，可以实现用户刷新界面后记录依旧保持

## 碰撞函数的实现

    function checkCollisions() {
        for (let i=0;i<allEnemies.length;i++) {
        if (allEnemies[i].row === player.row && Math.abs(allEnemies[i].x - player.x) <= 70) {
            if (--player.hearts === 0) {
              lostGame();  //生命值为0，游戏结束
              return;
            }
            player.inital();  //人偶回归到初始点

            showLife();  //显示人偶生命
            }
        }
    }


思路：在player的实例中，存储人偶的row及col坐标；在enemy的实例中，保存有bug的row，当检测到人偶与bug处在同一行时（row相等），再进行距离检测，通过将player与bug的x坐标相减并取绝对值，判断是否在碰撞区间内（这里设置为坐标间距为70），满足则判定为碰撞，反之亦然；这种碰撞函数的处理方法解决了由于屏幕动画刷新速度过快导致坐标更新不及时而造成的小人生命值重复流失的问题
